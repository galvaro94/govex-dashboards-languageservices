<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Interpretation Dashboard</title>
<style>
  :root{
    /* keep in sync with index.html */
    --brand-bg:#0e1431; --brand-surface:#121a3a; --brand-accent:#7c4dff;
    --brand-text:#e7ecf7; --brand-muted:#a9b2c7;
    --status-completed-bg:#0f5132; --status-completed-text:#d1f7df;
    --status-inprogress-bg:#5c5100; --status-inprogress-text:#fff7b3;
    --status-pending-bg:#5a1a1a; --status-pending-text:#ffccd0;
  }
  body{margin:0;background:var(--brand-bg);color:var(--brand-text);font:16px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;}
  .wrap{max-width:1100px;margin:auto;padding:28px 20px;}
  a{color:var(--brand-accent);text-decoration:none} a:hover{text-decoration:underline}
  .title{font-size:32px;font-weight:800;margin:0 0 22px}
  .controls{display:flex;flex-wrap:wrap;gap:10px;margin:0 0 18px}
  .select,.search{background:var(--brand-surface);border:1px solid var(--brand-muted);color:var(--brand-text);border-radius:10px;padding:10px 12px}
  .search{min-width:260px}
  .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:14px}
  .card{background:var(--brand-surface);border:1px solid #ffffff22;border-radius:14px;padding:14px;box-shadow:0 4px 16px #00000026}
  .card h3{margin:0 0 6px;font-size:18px}
  .sub{color:var(--brand-muted);font-size:13px;margin-bottom:10px}
  .row{display:flex;gap:10px;align-items:center;margin:4px 0;font-size:14px}
  .pill{display:inline-flex;align-items:center;gap:6px;padding:4px 9px;border-radius:999px;font-size:12px;border:1px solid #ffffff33}
  .pill--completed{background:var(--status-completed-bg);color:var(--status-completed-text)}
  .pill--inprogress{background:var(--status-inprogress-bg);color:var(--status-inprogress-text)}
  .pill--pending{background:var(--status-pending-bg);color:var(--status-pending-text)}
  .muted{color:var(--brand-muted)}
</style>
</head>
<body>
  <div class="wrap">
    <a href="./">« Back to Translations</a>
    <h1 class="title">Interpretation Dashboard</h1>

    <div class="controls">
      <select id="program" class="select">
        <option value="all">All Programs</option>
      </select>
      <input id="search" class="search" type="search" placeholder="Search event, program, interpreter…" />
    </div>

    <div id="summary" class="muted" style="margin:6px 0 16px;"></div>

    <div id="grid" class="grid"></div>
  </div>

<script>
(async function(){
  const res = await fetch('./interpretation.json',{cache:'no-store'});
  const data = await res.json();

  const $grid = document.getElementById('grid');
  const $program = document.getElementById('program');
  const $search = document.getElementById('search');
  const $summary = document.getElementById('summary');

  const programs = Array.from(new Set(data.map(d=>d.program).filter(Boolean))).sort();
  programs.forEach(p => {
    const opt = document.createElement('option');
    opt.value = p; opt.textContent = p;
    $program.appendChild(opt);
  });

  function matchesText(d,q){
    if(!q) return true;
    q=q.toLowerCase();
    return [d.program,d.languageType,d.eventName,d.interpreter,d.status]
      .some(x => (x||'').toLowerCase().includes(q));
  }

  function statusClass(s){
    const v=(s||'').toLowerCase();
    if(v.includes('complete')) return 'pill pill--completed';
    if(v.includes('progress')) return 'pill pill--inprogress';
    return 'pill pill--pending';
  }

  function render(){
    const p=$program.value, q=$search.value.trim();
    const filtered=data.filter(d => (p==='all'||d.program===p) && matchesText(d,q));
    $summary.textContent = `${filtered.length} of ${data.length} requests`;

    $grid.innerHTML='';
    filtered.forEach(d=>{
      const card=document.createElement('div');
      card.className='card';
      card.innerHTML=`
        <h3>${d.eventName||'Untitled event'}</h3>
        <div class="sub">${d.program||'—'} • ${d.languageType||'—'}</div>

        <div class="row"><span class="${statusClass(d.status)}">${d.status||'Pending'}</span></div>
        <div class="row"><span class="muted">Event Date:</span> <strong>${d.eventDate||'—'}</strong></div>
        <div class="row"><span class="muted">Event Time:</span> <strong>${d.eventTime||'—'}</strong></div>

        <div class="row"><span class="muted">Interpreter:</span> <strong>${d.interpreter||'—'}</strong></div>
      `;
      $grid.appendChild(card);
    });
  }

  $program.addEventListener('change', render);
  $search.addEventListener('input', render);
  render();
})();
</script>
</body>
</html>
